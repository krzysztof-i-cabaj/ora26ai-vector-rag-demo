\# ğŸš€ Galactic Support RAG: Oracle 23ai Vector Search Demo



\[Oracle Database](https://img.shields.io/badge/Oracle-Database%2023ai-f80000?logo=oracle\&logoColor=white)

\[Python](https://img.shields.io/badge/Python-3.10%2B-blue?logo=python\&logoColor=white)

\[Status](https://img.shields.io/badge/Status-Completed-success)



> \*\*End-to-End implementation of Retrieval-Augmented Generation (RAG) running entirely inside the Oracle Database kernel.\*\*



\## ğŸŒŒ Overview



This project is a Proof of Concept (PoC) for a \*\*"Galactic Support Desk"\*\*. It demonstrates how to perform semantic search, clustering, and anomaly detection on starship incident reports without the data ever leaving the database.



The goal was to prove that you don't need a separate Vector Database to build intelligent appsâ€”Oracle 23ai handles vectors, relational data, and JSON in a single engine.



ğŸ‘‰ \*\*\[Phase 1 - LAUNCH LIVE DEMO (GitHub Pages)](https://krzysztof-i-cabaj.github.io/ora26ai-vector-rag-demo/v1\_pilot/index.html)\*\* ğŸ‘ˆ



ğŸ‘‰ \*\*\[Phase 2 - LAUNCH LIVE DEMO (GitHub Pages)](https://krzysztof-i-cabaj.github.io/ora26ai-vector-rag-demo/v2\_enriched/index.html)\*\* ğŸ‘ˆ



---



\## ğŸ§  The Engineering Journey: Solving the ONNX Puzzle



One of the biggest challenges in this project was importing an open-source Embedding Model into the Oracle Database Kernel. Standard ONNX exports often contain \*\*dynamic axes\*\* (variable input lengths), which conflict with the strict memory allocation of the database (causing `ORA-54448` errors).



This repository documents two paths to solve this:



\### 1. The "Production" Path (Recommended)

For the final deployment, I switched to the \*\*`all\_MiniLM\_L12\_v2\_augmented`\*\* model officially provided by Oracle via OCI.

\* \*\*Why?\*\* This model is pre-optimized for OML (Oracle Machine Learning) and "augmented" to ensure static tensor shapes, preventing memory errors.

\* \*\*Result:\*\* Native loading via `DBMS\_VECTOR`.



\### 2. The "Research" Path (Python Engineering)

Before finding the augmented model, I engineered a custom fix. I wrote a Python script using \*\*PyTorch\*\* and \*\*Transformers\*\* to manually "freeze" the model dimensions to Static Shapes \[1, 128].

\* \*See `python/fix\_onnx\_model.py` if you want to learn how to manipulate ONNX graphs manually.\*



---



\## ğŸ¯ Key Features



\* \*\*In-Database Embeddings:\*\* Using Augmented ONNX model (\*\*`all\_MiniLM\_L12\_v2`\*\*) loaded directly into Oracle DB memory.

\* \*\*Vector Distance:\*\* Cosine similarity calculation using the native `VECTOR\_DISTANCE` SQL function.

\* \*\*Semantic Clustering:\*\* Identifying incorrect department assignments (Anomalies) based on vector distance from centroids.

\* \*\*Automated Reporting:\*\* HTML Dashboard generated entirely via PL/SQL and MCP Agents.



---



\## ğŸ“Š Visual Results



\### 1. Semantic Clusters (PCA Visualization)

The PCA visualization below shows how Oracle grouped semantically similar tickets (Security vs. Engineering vs. Admin) even without keyword matching.



!\[Cluster Map](docs/images/galactic\_clusters.png)



\### 2. Similarity Search

We queried the database with: \*"Something is burning and very hot"\* without using the word "temperature". The system correctly identified "Core Overheat" events.



---



\## ğŸ› ï¸ Architecture



\* \*\*Database:\*\* Oracle Database 23ai Free (Vector Data Type)

\* \*\*Model:\*\* `all\_MiniLM\_L12\_v2` (Quantized, Augmented)

\* \*\*Backend:\*\* PL/SQL (No external app server required)

\* \*\*Frontend:\*\* HTML/JS Dashboard generated by an \*\*MCP Agent\*\* (VS Code).



---



\## ğŸ“‚ Repository Structure



```text

.

â”œâ”€â”€ README.md               # Project Overview

â”œâ”€â”€ INSTALL.md              # Detailed Setup Instructions

â”‚

â”œâ”€â”€ sql/                    # PL/SQL Scripts

â”‚   â”œâ”€â”€ 01\_sys\_setup.sql    # Admin setup

â”‚   â”œâ”€â”€ 02\_load\_onnx.sql    # In-Database Model Loading

â”‚   â”œâ”€â”€ 03\_data\_gen\_v2.sql  # Pilot Data Generation

â”‚   â””â”€â”€ 03\_data\_enrich.sql  # Stress Test Data Injection

â”‚

â”œâ”€â”€ python/                 # Python Logic

â”‚   â”œâ”€â”€ fix\_onnx\_model.py   # The "Research Path" script

â”‚   â””â”€â”€ 05\_visualize\_clusters.py

â”‚

â””â”€â”€ docs/                   # GitHub Pages Content



ğŸ‘¤ Author

Krzysztof Cabaj (KCB) - Oracle DBA \& AI Enthusiast

