# ğŸš€ Galactic Support RAG: Oracle 26ai Vector Search Demo

![Oracle Database](https://img.shields.io/badge/Oracle-Database%2023ai-f80000?logo=oracle&logoColor=white)
![Python](https://img.shields.io/badge/Python-3.10%2B-blue?logo=python&logoColor=white)
![Status](https://img.shields.io/badge/Status-Completed-success)

> **End-to-End implementation of Retrieval-Augmented Generation (RAG) running entirely inside the Oracle Database kernel.**

## ğŸŒŒ Overview

This project is a Proof of Concept (PoC) for a **"Galactic Support Desk"**. It demonstrates how to perform semantic search, clustering, and anomaly detection on starship incident reports without the data ever leaving the database.

The goal was to prove that you don't need a separate Vector Database to build intelligent appsâ€”Oracle 26ai handles vectors, relational data, and JSON in a single engine.

ğŸ‘‰ **[Phase 1 - LAUNCH LIVE DEMO (GitHub Pages)](https://krzysztof-i-cabaj.github.io/ora26ai-vector-rag-demo/v1_pilot/index.html)** ğŸ‘ˆ

ğŸ‘‰ **[Phase 2 - LAUNCH LIVE DEMO (GitHub Pages)](https://krzysztof-i-cabaj.github.io/ora26ai-vector-rag-demo/v2_enriched/index.html)** ğŸ‘ˆ

---

## ğŸ§  The Engineering Journey: Solving the ONNX Puzzle

One of the biggest challenges in this project was importing an open-source Embedding Model into the Oracle Database Kernel. Standard ONNX exports often contain **dynamic axes** (variable input lengths), which conflict with the strict memory allocation of the database (causing `ORA-54448` errors).

This repository documents two paths to solve this:

### 1. The "Production" Path (Recommended)
For the final deployment, I switched to the **`all_MiniLM_L12_v2_augmented`** model officially provided by Oracle via OCI.
* **Why?** This model is pre-optimized for OML (Oracle Machine Learning) and "augmented" to ensure static tensor shapes, preventing memory errors.
* **Result:** Native loading via `DBMS_VECTOR`.

### 2. The "Research" Path (Python Engineering)
Before finding the augmented model, I engineered a custom fix. I wrote a Python script using **PyTorch** and **Transformers** to manually "freeze" the model dimensions to Static Shapes [1, 128].
* *See `python/fix_onnx_model.py` if you want to learn how to manipulate ONNX graphs manually.*

---

## ğŸ“ˆ Data Evolution: Pilot vs. Stress Test

The demo features two datasets to test the robustness of the vector embeddings:

1.  **ğŸ£ Phase 1: The Pilot (50 Tickets)**
    Basic dataset to validate the ONNX integration and simple clustering.

2.  **ğŸ¦… Phase 2: The Stress Test (122 Tickets)**
    Enriched with edge cases (e.g., ambiguous security threats vs. engineering failures) to test clustering density and anomaly detection limits.

---

## ğŸ› ï¸ Architecture

* **Database:** Oracle 23ai (Vector Data Type, `VECTOR_DISTANCE`)
* **Model:** `all_MiniLM_L12_v2` (Quantized, Augmented)
* **Frontend:** HTML/JS Dashboard generated by an **MCP (Model Context Protocol)** Agent via VS Code.

---

## ğŸš€ Quick Start

For a complete, step-by-step deployment guide (including database configuration, model download, and data seeding), please refer to:

ğŸ‘‰ **[INSTALL.md](INSTALL.md)**

### Summary of Steps:
1.  **Setup:** Run `sql/01_sys_setup.sql` to create user and directories.
2.  **Download:** Fetch the Oracle Augmented L12 ONNX model (link in `INSTALL.md`).
3.  **Load:** Run `sql/02_load_onnx.sql` to import the model into the Database Kernel.
4.  **Data:** Run `sql/03_data_gen_v2.sql` to generate tickets and calculate vectors.
5.  **Visualize:** View the dashboard on GitHub Pages or run the local Python visualizer.

---

## ğŸ“‚ Repository Structure

```text
.
â”œâ”€â”€ README.md               # Project Overview
â”œâ”€â”€ INSTALL.md              # Detailed Setup Instructions
â”‚
â”œâ”€â”€ sql/                    # PL/SQL Scripts
â”‚   â”œâ”€â”€ 01_sys_setup.sql    # Admin setup
â”‚   â”œâ”€â”€ 02_load_onnx.sql    # In-Database Model Loading
â”‚   â”œâ”€â”€ 03_data_gen_v2.sql  # Pilot Data Generation
â”‚   â””â”€â”€ 03_data_enrich.sql  # Stress Test Data Injection
â”‚
â”œâ”€â”€ python/                 # Python Logic
â”‚   â”œâ”€â”€ fix_onnx_model.py   # The "Research Path" script
â”‚   â””â”€â”€ 05_visualize_clusters.py
â”‚
â””â”€â”€ docs/                   # GitHub Pages Content
    â”œâ”€â”€ index.html          # Dashboard Landing Page
    â”œâ”€â”€ v1_pilot/           # Reports for 50 records
    â””â”€â”€ v2_enriched/        # Reports for 122 records
